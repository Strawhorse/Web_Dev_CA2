<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="style2.css">
  <!--    Link to CDN for jQuery online so fewer files to upload-->
<!--  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>-->

<!--  Small javascript function to stop older dates being selected for the date of the movie-->
  <script type="text/javascript">
  window.onload=function(){
<!--  set the date and then return it formatted as a String and split it on 'T' which is where the date ends-->
    var today = new Date().toISOString().split('T')[0];
<!--    Set minimum date to today's date-->
    document.getElementsByName("viewing")[0].setAttribute('min', today);
  }
  </script>

  <title>Tickets</title>
</head>

<body>

<!--Navbar menu on top of screen-->
<div class="navbar justify-content-center ">

  <a href="index.html"><i class="fa fa-fw fa-search"></i> Main page</a>

  <!--        Link to pop open window with info-->
  <a href="#popup-box1"><i class="fa fa-fw fa-user"></i> About</a>
</div>


<!--All fields are 'required' to make sure that no null values are passed in (movie has default choice of Fight Club so will never be null-->

<div id="booking-form">
  <form method="post" action="reservation.php" onsubmit="return validateCaptcha()">
    <div class="main-group">
      <label for="name" style="color: white;">Your Name</label>
<!--      Adding a minlength html tag of 5 to make sure name has at least a basic length of 5-->
      <input type="text" minlength="5" id="name" name="patron_name" placeholder="John Doe" required>
    </div>
    <div class="main-group">
      <label for="email" style="color: white;">Your E-mail</label>
<!--      Input type is set to email here so no regex is required as it will automatically ensure a correctly formatted email address is included-->
      <input type="email" id="email" name="email_address" placeholder="john.doe@email.com" required>
    </div>
    <hr>
    <div class="main-group">
      <label for="movie-name" style="color: white;">Pick a movie:</label>
      <select id="movie-name" name="movie name">
        <option value="Fight Club">Fight Club</option>
        <option value="The Big Short">The Big Short</option>
        <option value="Lost in Translation">Lost in Translation</option>
        <option value="Jaws">Jaws</option>
        <option value="Return of the Living Dead">Return of the Living Dead</option>
        <option value="Closer">Closer</option>
        <option value="Scott Pilgrim vs The World">Scott Pilgrim vs The World</option>
        <option value="Reservoir Dogs">Reservoir Dogs</option>
        <option value="Shaun of the Dead">Shaun of the Dead</option>
        <option value="Terminator 2">Terminator 2</option>
        <option value="T2 Trainspotting">T2 Trainspotting</option>
        <option value="Ghostbusters">Ghostbusters</option>
      </select>
    </div>
    <div class="main-group">
      <label for="adult" style="color: white;">Tickets</label>
<!--      Adding a minimum of 1 ticket check on the booking-->
      <input type="number" id="adult" name="tickets" placeholder="0" min="1" required>
    </div>

<!--    Used small javascript function that loads at the start (see top of file) to make sure that the older dates are not available to book as a form of validation-->
    <div class="main-group">
      <label for="movie-date" style="color: white;">Movie date</label>
      <input type="date" id="movie-date" name="viewing" required>
    </div>
    <br>
    <div class="captcha" style="margin: auto; text-align:center;">

<!--Hide the antispam element so that the bot will fill it in but regular users won't -->
      <p class="antispam" style="display:none;">Leave this empty: <input type="text" name="url" /></p>

<!--Add a checkbox to avoid spam bots-->
    <div class="main-group">
      <input type="checkbox" id="terms" required>
      <label for="terms" style="color: white;">I am not a robot</label>
    </div>

<!--      Captcha box: cannot get to work, details in report-->
<!--      <div id="captcha">-->
<!--      </div>-->
<!--      <input type="text" placeholder="Captcha" id="cpatchaTextBox"/>-->

<!--      Confirm button-->
    <input id="button-center" type="submit" value="Submit" name="submit">
    </div>
  </form>
</div>



<!--    Pop-up box with student details -->
<div id="popup-box1" class="modal">
  <div class="content">
    <br>
    <p>
      Student ID: sba22328 <br>
      L7 Diploma in Applied Software Development <br>
      Web development CA2: Enhanced edition <br>
      Assignment deadline: Wednesday, April 5th 2023
    </p>
    <p>
      Languages used: <br>
    </p>
    <ul>
      <li>
        More HTML5
      </li>
      <li>
        More CSS3
      </li>
      <li>
        More Javascript/jQuery
      </li>
      <li>
        More PHP
      </li>
      <li>
        More SQL
      </li>
    </ul>

    <!--            X button to close the window down-->
    <a href="#"
       class="box-close">
      Ã—
    </a>
  </div>
</div>


<!-- captcha script from class: cannot get to work, see report for details-->
<!--  <script>-->
<!--    var code;-->
<!--    function createCaptcha() {-->
<!--      //clear the contents of captcha div first-->
<!--      document.getElementById('captcha').innerHTML = "";-->
<!--      var charsArray =-->
<!--      "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ@!#$%^&*";-->
<!--      var lengthOtp = 6;-->
<!--      var captcha = [];-->
<!--      for (var i = 0; i < lengthOtp; i++) {-->
<!--        //below code will not allow Repetition of Characters-->
<!--        var index = Math.floor(Math.random() * charsArray.length + 1); //get the next character from the array-->
<!--        if (captcha.indexOf(charsArray[index]) == -1)-->
<!--          captcha.push(charsArray[index]);-->
<!--        else i&#45;&#45;;-->
<!--      }-->
<!--      var canv = document.createElement("canvas");-->
<!--      canv.id = "captcha";-->
<!--      canv.width = 100;-->
<!--      canv.height = 50;-->
<!--      var ctx = canv.getContext("2d");-->
<!--      ctx.font = "25px Georgia";-->
<!--      ctx.strokeText(captcha.join(""), 0, 30);-->
<!--      //storing captcha so that can validate you can save it somewhere else according to your specific requirements-->
<!--      code = captcha.join("");-->
<!--      document.getElementById("captcha").appendChild(canv); // adds the canvas to the body element-->
<!--    }-->
<!--    function validateCaptcha() {-->
<!--              event.preventDefault();-->
<!--              debugger-->
<!--              if (document.getElementById("cpatchaTextBox").value == code) {-->
<!--                alert("Captcha correct. Submitting...");-->
<!--                return true;-->
<!--              }else{-->
<!--                alert("Invalid Captcha. try Again");-->
<!--                createCaptcha();-->
<!--              }-->
<!--            }-->
<!--    </script>-->

</body>
</html>


